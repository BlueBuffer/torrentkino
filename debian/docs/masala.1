.\" generated with Ronn/v0.7.3
.\" http://github.com/rtomayko/ronn/tree/0.7.3
.
.TH "MASALA" "1" "July 2013" "" ""
.
.SH "NAME"
\fBmasala\fR \- P2P name resolution daemon
.
.SH "SYNOPSIS"
\fBmasala\fR [\-d] [\-q] [\-h hostname] [\-k password] [\-r realm] [\-p port] [\-x server] [\-y port] [\-u username]
.
.SH "DESCRIPTION"
\fBmasala\fR is a P2P name resolution daemon\. It resolves hostnames into IPv6 addresses by using a distributed hash table\. This DHT is compatible to the Kademlia DHT as used in Bittorrent Clients like Transmission\.
.
.P
By default, masala sends the first packet to a multicast address\. So, for intranet use cases, you do not need a bootstrap server\. Just start masala on 2 nodes without any parameters\. It simply works\.
.
.P
If you would like to connect nodes around the globe, you may use the Bittorrent network\. Simply select a Bittorrent bootstrap server as seen in the example below\. Your client becomes a full member of the swarm and resolves info hashes to IPv6/port tuples\. The swarm on the other end does the same for you\. But in your case, the info hash represents a hostname and not a torrent file\.
.
.P
A NSS module makes any hostname with \fI\.p2p\fR at the end transparently available to your Linux OS\. The NSS modul tries to contact the masala daemon at ::1 and UDP/6881\. The daemon then resolves the requested hostname recursively even if you use encryption\. As long as the connection comes from ::1 the masala daemon will accept the recursive requests\.
.
.SH "FILES"
.
.TP
\fB/etc/nsswitch\.conf\fR
masala gets attached to the \fIhosts\fR line\. The masala daemon then gets used to lookup a hostname if the requested hostname ends on \fI\.p2p\fR\.
.
.SH "OPTIONS"
.
.TP
\fB\-h\fR \fIhostname\fR
By default /etc/hostname is used to determine the hostname\.
.
.TP
\fB\-k\fR \fIpassword\fR
Setting a password results in encrypting each packet with AES256\. The encrypted message is encapsulated in bencode too\. You effectively isolate your nodes from the rest of the world this way\. This method is not compatible to the Bittorrent network and only works between masala daemons\.
.
.TP
\fB\-r\fR \fIrealm\fR
Creating a realm affects the method how to compute the info hash\. It helps you to isolate your nodes and be part of a bigger swarm at the same time\. This is useful to handle duplicate hostnames\. So now, everybody may have his own https://owncloud\.p2p within his own realm for example\.
.
.TP
\fB\-p\fR \fIport\fR
Listen to this port (Default: UDP/6881)
.
.TP
\fB\-x\fR \fIserver\fR
Use server as a bootstrap server\. The server can be an IPv6 address, a FQHN like www\.example\.net or even a IPv6 multicast address\. (Default: ff0e::1)
.
.TP
\fB\-y\fR \fIport\fR
The bootstrap server will be addressed at this port\. (Default: UDP/6881)
.
.TP
\fB\-u\fR \fIusername\fR
When starting as root, use \-u to change the UID\.
.
.TP
\fB\-d\fR
Start as a daemon and run in background\. The output will be send to syslog\.
.
.TP
\fB\-v\fR
Verbose\.
.
.SH "INSTALLATION"
.
.IP "\(bu" 4
apt\-get install build\-essential
.
.IP "\(bu" 4
apt\-get install debhelper
.
.IP "\(bu" 4
apt\-get install git\-buildpackage
.
.IP "\(bu" 4
apt\-get install libpolarssl\-dev
.
.IP "\(bu" 4
git\-buildpackage
.
.IP "\(bu" 4
dpkg \-i \.\./masala_0\.6_amd64\.deb
.
.IP "" 0
.
.SH "EXAMPLES"
Announce the hostname \fIowncloud\.p2p\fR within the realm TooManySecrets to an IPv6 Bittorrent bootstrap server\. That bootstrap server is maintained by the creator of the Transmission DHT stack:
.
.IP "" 4
.
.nf

$ masala \-h owncloud\.p2p \-r TooManySecrets \-x dht\.wifi\.pps\.jussieu\.fr
.
.fi
.
.IP "" 0
.
.SH "BUGS"
Lack of IPv6 support by the providers\.
.
.SH "SEE ALSO"
nsswitch\.conf(5)
